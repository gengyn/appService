<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qingzhou.app.client.dao.LoginStatusDao">
	<!-- 查询客户登录 -->
      <select id="selectByPk" parameterType="map" resultType="loginStatus">
		select user_token, user_name, user_phone, login_time, last_time from t_app_loginstatus 
		<where>
			<if test="user_token != null and user_token != ''">
					 and user_token=#{user_token} 
			</if>
		</where>
    </select>
    
    <!-- 客户登录记录数 -->
     <select id="countUser_token" resultType="int" parameterType="map">
			select count(user_token) as sumsize 
		 	   from t_app_loginstatus 
			<where>
				<if test="user_token != null and user_token != ''">
					 and user_token=#{user_token} 
				</if>
				<if test="user_name != null and user_name != ''">
					 and user_name=#{user_name} 
				</if>
				<if test="user_phone != null and user_phone != ''">
					 and user_phone=#{user_phone} 
				</if>
			</where>
	</select>
    <!-- 新增客户登录信息 -->	
    <insert id="insertLoginStatus" parameterType="map">
		INSERT INTO t_app_loginstatus
		 (user_token,user_name,user_phone)
		VALUES
		(#{user_token},	#{user_name},#{user_phone})
	</insert>
    <!-- 更新客户登录信息 -->	
	<update id="updateLoginStatus" parameterType="map" >
		UPDATE t_app_loginstatus set last_time=sysdate
		WHERE user_token=#{user_token}
	</update>
	<!-- 删除客户登录信息 -->	
	<delete id="deleteLoginStatus" >
			DELETE FROM t_app_loginstatus WHERE user_token =  #{user_token}
	</delete>
</mapper>